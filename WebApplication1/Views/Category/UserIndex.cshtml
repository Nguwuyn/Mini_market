@model Tuple<WebApplication1.Models.Category, IEnumerable<WebApplication1.Models.Product>>
@{
    ViewBag.Title = "UserIndex";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int CurrentPage = (int)ViewBag.CurrentPage;
    int MaxPage = (int)ViewBag.MaxPage;
}

@section Styles {
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="@Url.Content("~/Content/css/Index.css")" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css" integrity="sha512-yHknP1/AwR+yx26cB1y0cjvQUMvEa2PFzt1c9LlS4pRQ5NOTZFWbhBig+X9G9eYW/8m0/4OXNx8pxJ6z57x0dw==" crossorigin="anonymous" />
    <link href="@Url.Content("~/Content/css/Paginator.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/css/ForAdmin.css")" rel="stylesheet" type="text/css" />
}

<div style="margin-bottom: 24px" class="list-href">
    <a href="@Url.Action("Index", "Home")">Trang chủ</a>
    >
    <a>href="@Url.Action("UserIndex","Category")<b>Danh mục</b></a>
    >
    <a href="@Request.Path">Trang @CurrentPage</a>
</div>

<link href="~/Content/bootstrap.css" rel="stylesheet" />
<style>
    .hover-image-wrapper {
        position: absolute;
        left: 45%;
        margin-top: 45px;
        visibility: hidden;
        opacity: 0;
        transition: 0.2s opacity;
    }

        .hover-image-wrapper.show {
            visibility: visible;
            opacity: 1;
        }

        .hover-image-wrapper img {
            max-height: 10rem
        }
</style>
<script>
    function show(n) {
        document.getElementById(n).classList.add("show")
    }

    function hide(n) {
        document.getElementById(n).classList.remove("show")
    }

    function move(n, e) {
        let div = document.getElementById(n);
        div.style.left = e.pageX + "px";
        div.style.top = e.pageY + "px";
    }
</script>
<div style="margin:auto"><b>@Model.Item1</b></div>
<div style="overflow-x: auto">
    <table class="table" style="width: max-content;">
        <tr>
            <th>
                Tên sản phẩm
            </th>
            <th>
                Mô tả
            </th>
            <th>
                Giá tiền
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model.Item2)
        {
            <tr onmouseover="show(@item.ProductID)" onmouseout="hide(@item.ProductID)" onmousemove="move(@item.ProductID, event)">
                <td>
                    @Html.ActionLink(item.ProductName, "Details", new { id = item.ProductID })
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ProductDescription)
                </td>
                <td>
                    @String.Format("{0:#,#.##}", item.ProductPrice)đ
                <td class="hover-image-wrapper" id="@item.ProductID">
                    <img src="@Url.Content(item.ProductImg)" />
                </td>
            </tr>
        }

    </table>
</div>
<div class="page-nav" style="align-items:center">
    <div class="grid-nav-page">
        @if (CurrentPage == MaxPage)
        {
            <a class="page-btn" href="@Url.Action("UserIndex", new { page = 1 })"><<</a>
            <a class="page-btn" href="@Url.Action("UserIndex", new { page = CurrentPage - 1})">@(CurrentPage-1)  </a>
            <a class="page-btn" href="@Url.Action("UserIndex", new { page = CurrentPage })">@(CurrentPage)  </a>
            <a class="page-btn" href="@Url.Action("UserIndex", new { page = MaxPage })">>>  </a>

        }
        else
            if (CurrentPage < MaxPage && CurrentPage > 1)
        {
            <a class="page-btn" href="@Url.Action("UserIndex", new { page = 1 })"><<  </a>
            <a class="page-btn" href="@Url.Action("UserIndex", new { page = CurrentPage - 1})">@(CurrentPage-1)  </a>
            <a class="page-btn" href="@Url.Action("UserIndex", new { page = CurrentPage })">@(CurrentPage)  </a>
            <a class="page-btn" href="@Url.Action("UserIndex", new { page = CurrentPage + 1 })">@(CurrentPage + 1)  </a>
            <a class="page-btn" href="@Url.Action("UserIndex", new { page = MaxPage })">>>  </a>
        }
        else
        {
            <a class="page-btn" href="@Url.Action("UserIndex", new { page = 1 })"><<  </a>
            <a class="page-btn" href="@Url.Action("UserIndex", new { page = CurrentPage })">@(CurrentPage)  </a>
            <a class="page-btn" href="@Url.Action("UserIndex", new { page = CurrentPage + 1 })">@(CurrentPage + 1)  </a>
            <a class="page-btn" href="@Url.Action("UserIndex", new { page = MaxPage })">>>  </a>
        }
    </div>
</div>

